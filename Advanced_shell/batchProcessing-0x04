#!/bin/bash
# Parallel data fetching for Pok√©mon

POKEMONS=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")
API_URL="https://pokeapi.co/api/v2/pokemon"

OUTPUT_DIR="pokemon_data_parallel"
mkdir -p "$OUTPUT_DIR"

echo "Fetching Pok√©mon data in parallel..."

for pokemon in "${POKEMONS[@]}"; do
    (
        response=$(curl -s -w "%{http_code}" -o "$OUTPUT_DIR/$pokemon.json" "$API_URL/$pokemon")
        status=${response: -3}

        if [[ $status -ne 200 ]]; then
            echo "‚ùå Failed to fetch $pokemon (HTTP $status)"
            rm -f "$OUTPUT_DIR/$pokemon.json"
        else
            echo "‚úÖ Successfully fetched $pokemon"
        fi
    ) &
done

# Wait for all background processes to finish
wait
echo "üéâ All Pok√©mon data fetched in parallel!"

